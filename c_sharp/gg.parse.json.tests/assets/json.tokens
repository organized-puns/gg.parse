/* 
 * Simple EBNF notation for the tokens json
 */

-r json_tokens	= *valid_token;

valid_token		= json_token | white_space | unknown_token;

-r json_token	= float | int | boolean | null | string | scope_start | scope_end | array_start | array_end | 
					kv_separator | item_separator;

-a sign           = '+' | '-';
digit           = { '0'..'9' };
float           = int, '.', +digit, ?(('e' | 'E'), int);
int             = ?sign, +digit;

boolean         = 'true' | 'false';
null			= 'null';

// allow for both single - and double quoted strings
-a sq_string_char = !'"', .;
-a sq_string      = '"', *sq_string_char, '"';

-a dq_string_char = !"'", .;
-a dq_string      = "'", *dq_string_char, "'";

string			= sq_string | dq_string;

scope_start		= '{';
scope_end		= '}';

array_start		= '[';
array_end		= ']';

kv_separator	= ':';
item_separator	= ',';

-a white_space	= { ' \t\r\n' };

// errors
unknown_token	= error "unknown token found." if *(!json_token, .);